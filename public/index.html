<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WatchTogether â€” CineNight</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- ğŸ¨ Styles -->
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="stylesheet" href="/static/css/theme.css">

  <!-- ğŸ¬ App Icon -->
  <link rel="icon" href="data:image/svg+xml,
  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
    <text y='.9em' font-size='90'>ğŸ¬</text>
  </svg>">
</head>

<body>

<!-- ================= App Shell ================= -->
<div class="app">

  <!-- ================= Header ================= -->
  <header class="top">
    <div class="brand">ğŸ¬ WatchTogether</div>
    <div class="tag">Watch movies together in sync</div>
  </header>

  <!-- ======================================================
       ğŸš€ Landing Screens
  ======================================================= -->

  <!-- Start Screen -->
  <section id="startScreen" class="start-screen">
    <button id="createBtn" class="btn primary large-btn">Create Room</button>
    <button id="joinBtnStart" class="btn large-btn">Join Room</button>
  </section>

  <!-- Create Room Modal -->
  <section id="createForm" class="card modal hidden">
    <h2>Create Room</h2>

    <input id="userNameCreate" placeholder="Your name" />
    <input id="roomNameCreate" placeholder="Room name" />

    <div class="modal-actions">
      <button id="createConfirm" class="btn primary">Create & Join</button>
      <button id="createCancel" class="btn">Cancel</button>
    </div>
  </section>

  <!-- Join Room Modal -->
  <section id="joinForm" class="card modal hidden">
    <h2>Join Room</h2>

    <input id="userNameJoin" placeholder="Your name" />
    <input id="roomNameJoin" placeholder="Room name" />

    <div class="modal-actions">
      <button id="joinConfirm" class="btn primary">Join</button>
      <button id="joinCancel" class="btn">Cancel</button>
    </div>
  </section>

  <!-- ======================================================
       ğŸ¥ Main Application Panel
  ======================================================= -->

  <main id="mainPanel" class="panel hidden">

    <!-- ================= Video Column ================= -->
    <section id="videoPanel" class="col left">

      <div class="card">

        <!-- Room Title -->
        <h3 id="roomTitle">Room: â€”</h3>

        <!-- Invite Link -->
        <div id="inviteBox" class="invite hidden">
          <input id="inviteLink" readonly />
          <button id="copyInviteBtn" class="btn">ğŸ“‹ Copy Link</button>
        </div>

        <!-- ================= Host Controls ================= -->
        <div id="hostControls">

          <!-- YouTube Loader -->
          <div class="loader-row">
            <input id="videoUrl" placeholder="Paste YouTube link" />
            <button id="loadVideoBtn" class="btn">Load YouTube</button>
          </div>

          <!-- Local File Loader -->
          <div class="loader-row">
            <label class="file-label">
              ğŸ“ Select Video File
              <input id="fileInputHost" type="file" accept="video/*" hidden>
            </label>
            <span id="hostFileInfo" class="muted">No file selected</span>
          </div>

          <!-- Playback Controls -->
          <div class="control-bar">
            <button id="playBtn" class="btn primary" disabled>â–¶ Play</button>
            <button id="readyBtn" class="btn secondary">Ready</button>
            <button id="clearVideoBtn" class="btn danger">ğŸ—‘ Clear</button>

            <!-- Ready Status Indicator -->
            <span id="readyIndicator" class="ready-indicator">ğŸŸ¡ Waiting</span>
          </div>

        </div>

        <!-- ================= Video Player ================= -->
<!-- ================= Video Player ================= -->
      <div id="playerContainer" class="player-container">
      
        <!-- Fullscreen Controls (YouTube only) -->
        <div id="ytScreenControls" class="yt-screen-controls hidden">
          <button id="ytFullscreenBtn" class="btn small">â›¶ Fullscreen</button>
          <button id="ytExitFullscreenBtn" class="btn small hidden">ğŸ—• Minimize</button>
        </div>
      
        <div id="player"></div>
      </div>


      </div>
    </section>

    <!-- ================= Sidebar ================= -->
    <aside id="sidebar" class="col right">

      <!-- Participants -->
      <section class="card">
        <h3>Participants</h3>
        <div id="participantsList"></div>
      </section>

      <!-- Chat -->
      <section class="card chat-card">
        <h3>Chat</h3>

        <div id="chatMessages" class="chatMessages"></div>

        <div class="chat-input">
          <input id="chatInput" placeholder="Type message..." />
          <button id="chatSend" class="btn">Send</button>
        </div>
      </section>

      <!-- Status -->
      <section class="card">
        <h3>Status</h3>
        <div id="statusText" class="muted">Not joined</div>
        <div id="fileMatchInfo" class="muted"></div>
      </section>

    </aside>

  </main>

  <!-- ================= Footer ================= -->
  <footer class="footer">
    Built with â¤ï¸ for movie nights
  </footer>

</div>

<!-- ======================================================
     ğŸ“¦ External Libraries
======================================================= -->

<!-- YouTube Iframe API -->
<script src="https://www.youtube.com/iframe_api"></script>

<!-- ======================================================
     ğŸš€ Application Scripts (Order matters)
======================================================= -->

<script src="/static/js/state.js"></script>
<script src="/static/js/dom.js"></script>
<script src="/static/js/socket.js"></script>
<script src="/static/js/video.js"></script>
<script src="/static/js/ui.js"></script>
<script src="/static/js/chat.js"></script>
<script src="/static/js/controls.js"></script>
<script src="/static/js/main.js"></script>

</body>
</html>
